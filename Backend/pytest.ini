[pytest]
# where to look for tests
testpaths = tests
python_files = test_*.py

# coverage settings
addopts =
    --strict-markers
    --cov-config=.coveragerc
    --cov=base
    --cov-report=term
    --cov-report=xml
    --cov-report=html
    --cov-fail-under=75

# Django settings
DJANGO_SETTINGS_MODULE = myproj.settings

# custom markers
markers =
    smoke:      end-to-end “does the whole stack work?” tests
    unit:       pure unit tests (no DB)
    integration: DB-backed endpoint or workflow tests
    regression: one-off bug reproducer tests

# live logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s

# file logging
log_file = logs/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)s] %(name)s:%(lineno)d %(message)s
